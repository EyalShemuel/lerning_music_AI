(this["webpackJsonpeyal-piano"]=this["webpackJsonpeyal-piano"]||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),c=n(28),i=n.n(c),a=(n(79),n(80),n(32)),s=n(11),u=n(16),l=n(124),d=n(126),p=n(125),j=n(123),b=n(6),y=function(){h();var e=r.a.useState(0),t=Object(u.a)(e,2),n=t[0],o=t[1];return Object(b.jsx)("div",{children:Object(b.jsx)(d.a,{position:"static",style:{backgroundColor:"black",borderRadius:10},children:Object(b.jsxs)(p.a,{value:n,setValue:o,onChange:function(e,t){o(t)},"aria-label":"simple tabs example",children:[Object(b.jsx)(j.a,{label:"Main",component:a.b,to:"/"}),Object(b.jsx)(j.a,{label:"About",component:a.b,to:"/About"}),Object(b.jsx)(j.a,{label:"Songs Notes",component:a.b,to:"/Notes_songs"})]})})})},h=Object(l.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}})),f=n(14),v=(n(87),function(e){e.id;var t=e.theKey,n=e.note,o=e.type;return Object(b.jsx)("div",{id:Math.floor(1e4*Math.random()),"data-note":n,className:"up"===o?"key black":"key white",children:Object(b.jsx)("h1",{children:t})})}),O=function(e,t){try{t.push(e)}catch(n){console.log(n)}return t},m=function(e,t,n,o,r,c){var i=t.indexOf(e),a=n.indexOf(e);"add"===c?(i>-1&&o[i].classList.add("active"),a>-1&&r[a].classList.add("active")):"remove"===c&&(i>-1&&o[i].classList.remove("active"),a>-1&&r[a].classList.remove("active"))},k=function(e){var t=e.keys,n=e.notesObject,r=e.setNotesObject,c=[];return Object(o.useEffect)((function(){var e=document.querySelectorAll(".key"),o=document.querySelectorAll(".key.white"),i=document.querySelectorAll(".key.black"),a=t.filter((function(e){return"down"===e.type?e.note:""})).map((function(e){return e.key})),s=t.filter((function(e){return"up"===e.type?e.note:""})).map((function(e){return e.key}));e.forEach((function(e){try{e.addEventListener("click",(function(o){try{var i=e.getElementsByTagName("h1")[0].innerHTML,a=t.filter((function(e){return e.key===i?e.note:""})).map((function(e){return e.note})),s=O(a,c);r([].concat(Object(f.a)(n),[s]))}catch(u){console.log("error")}}))}catch(o){console.log("error")}})),document.addEventListener("keydown",(function(e){e.repeat||m(e.key,a,s,o,i,"add")})),document.addEventListener("keyup",(function(e){var u=t.filter((function(t){return t.key===e.key?t.note:""})).map((function(e){return e.note}));m(e.key,a,s,o,i,"remove");var l=O(u,c);r([].concat(Object(f.a)(n),[l]))}))}),[]),Object(b.jsx)("div",{className:"piano",children:t.map((function(e,t){return Object(b.jsx)(v,{theKey:e.key,note:e.note,type:e.type,pressed:e.pressed},t)}))})},x=(n(88),n(7)),g=n(72),w=n(71).a.Flow,S=w.Formatter,N=w.Renderer,C=w.Stave,A=w.StaveNote,T=function(e){var t=e.staves,n=void 0===t?[]:t,r=e.clef,c=void 0===r?"treble":r,i=e.timeSignature,a=void 0===i?"4/4":i,s=e.width,u=void 0===s?450:s,l=e.height,d=void 0===l?150:l,p=Object(o.useRef)(),j=Object(o.useRef)();return Object(o.useEffect)((function(){if(null==j.current)j.current=new N(p.current,N.Backends.SVG);else try{document.getElementsByTagName("svg")[0].remove(),j.current=new N(p.current,N.Backends.SVG)}catch(i){console.log(i)}var e=j.current;e.resize(u,d);var t=e.getContext();t.setFont("Arial",10,"").setBackgroundFillStyle("#eed");var o=(u-60)/n.length,r=0;n.forEach((function(e,n){var s=new C(r,0,o);0===n&&(s.setWidth(o+60),s.addClef(c).addTimeSignature(a)),r+=s.getWidth(),s.setContext(t).draw();try{var u=e.map((function(e){return"string"===typeof e?{key:e}:e})).map((function(e){return Array.isArray(e)?{key:e[0],duration:e[1]}:e})).map((function(e){var t=e.key,n=Object(g.a)(e,["key"]);return"string"===typeof t?Object(x.a)({key:t.includes("/")?t:"".concat(t[0],"/").concat(t.slice(1))},n):n})).map((function(e){var t=e.key,n=e.keys,o=e.duration;return new A({keys:t?[t]:n,duration:String(void 0===o?"q":o)})}));S.FormatAndDraw(t,s,u,{auto_beam:!0,align_rests:!1})}catch(i){console.log(i)}}))}),[c,n,u,d,a,p]),Object(b.jsx)("div",{ref:p})},E=function(e){for(var t=Object(f.a)(e.notesObject),n=Object(f.a)(t),o=[],r=0,c=n.length;r<c;r+=4)o.push(n.slice(r,r+4));return Object(b.jsx)("div",{className:"mainSection",children:o.map((function(e,t){return Object(b.jsx)(T,{width:"1200",height:"150",clef:"treble",staves:e},t)}))})},F=n(44),R=n.n(F),z=n(68),L=n(69),B=n.n(L),M=[],_={probabilityThreshold:.9},D="https://teachablemachine.withgoogle.com/models/iF2ClR4MV/";var q=function(e){var t=e.notesObject,n=e.setNotesObject,r=e.keys;return Object(o.useEffect)((function(){var e=document.querySelectorAll(".key.white"),o=document.querySelectorAll(".key.black"),c=r.filter((function(e){return"down"===e.type?e.note:""})).map((function(e){return e.key})),i=r.filter((function(e){return"up"===e.type?e.note:""})).map((function(e){return e.key}));function a(){return(a=Object(z.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.soundClassifier("".concat(D,"model.json"),_);case 2:e.sent.classify(s);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(a,s){null!=a&&console.error("ther is error befor the try expretion:",a);try{if("Background Noise"!==s[0].label){var u=s[0].label;console.log(u);var l=r.filter((function(e){return e.note===u?e.note:""})).map((function(e){return e.key}));console.log("the key pressed is:",l),m(l[0],c,i,e,o,"add"),setTimeout((function(){m(l[0],c,i,e,o,"remove")}),500);var d=O(u,M);console.log(d),n([].concat(Object(f.a)(t),[d]))}}catch(a){console.log("ther is error:",a)}}!function(){a.apply(this,arguments)}()}),[]),Object(b.jsx)(b.Fragment,{})};var G=function(){var e=Object(o.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)([{key:"a",note:"c4",type:"down"},{key:"q",note:"db4",type:"up"},{key:"s",note:"d4",type:"down"},{key:"w",note:"Eb",type:"up"},{key:"d",note:"e4",type:"down"},{key:"f",note:"f4",type:"down"},{key:"t",note:"Gb",type:"up"},{key:"g",note:"g4",type:"down"},{key:"y",note:"Ab",type:"up"},{key:"h",note:"a5",type:"down"},{key:"u",note:"Bb",type:"up"},{key:"j",note:"b5",type:"down"},{key:"A",note:"c5",type:"down"},{key:"Q",note:"db",type:"up"},{key:"S",note:"d5",type:"down"},{key:"W",note:"eb",type:"up"},{key:"D",note:"e5",type:"down"},{key:"F",note:"f5",type:"down"},{key:"T",note:"gb",type:"up"},{key:"G",note:"g5",type:"down"},{key:"Y",note:"ab",type:"up"},{key:"H",note:"a6",type:"down"},{key:"U",note:"bb",type:"up"},{key:"J",note:"b6",type:"down"}]),i=Object(u.a)(c,2),a=i[0],s=i[1];return Object(b.jsxs)("div",{className:"screen",children:[Object(b.jsx)("h1",{children:"play and see what you play"}),Object(b.jsx)("div",{className:"tavim",children:Object(b.jsx)(E,{keys:a,setkeys:s,notesObject:n,setNotesObject:r})}),Object(b.jsx)(q,{keys:a,notesObject:n,setNotesObject:r}),Object(b.jsx)(k,{keys:a,notesObject:n,setNotesObject:r})]})};var P=function(){return Object(b.jsxs)("article",{className:"App",children:[Object(b.jsx)("h1",{children:"About The Project"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:"this is a simple project about react combining with AI"}),Object(b.jsx)("p",{children:"I used the fallowing technologies: "}),Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:"tenserflow"}),Object(b.jsx)("li",{children:"Vexflow"}),Object(b.jsx)("li",{children:"ml5"}),Object(b.jsx)("li",{children:"opensheetmusicdisplay"}),Object(b.jsx)("li",{children:"react-router"})]})]})]})},V=n(1),I=n(2),U=n(3),W=n(4),J=n(70),H=function(e){Object(U.a)(n,e);var t=Object(W.a)(n);function n(e){var o;return Object(V.a)(this,n),(o=t.call(this,e)).state={dataReady:!1},o.osmd=void 0,o.divRef=r.a.createRef(),o}return Object(I.a)(n,[{key:"setupOsmd",value:function(){var e=this,t={autoResize:void 0===this.props.autoResize||this.props.autoResize,drawTitle:void 0===this.props.drawTitle||this.props.drawTitle};this.osmd=new J.OpenSheetMusicDisplay(this.divRef.current,t),this.osmd.load(this.props.file).then((function(){return e.osmd.render()}))}},{key:"resize",value:function(){this.forceUpdate()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize)}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.drawTitle!==e.drawTitle?this.setupOsmd():this.osmd.load(this.props.file).then((function(){return t.osmd.render()})),window.addEventListener("resize",this.resize)}},{key:"componentDidMount",value:function(){this.setupOsmd()}},{key:"render",value:function(){return Object(b.jsx)("div",{ref:this.divRef})}}]),n}(o.Component),K=function(e){Object(U.a)(n,e);var t=Object(W.a)(n);function n(e){var o;return Object(V.a)(this,n),(o=t.call(this,e)).state={file:"MuzioClementi_SonatinaOpus36No1_Part2.xml"},o}return Object(I.a)(n,[{key:"handleClick",value:function(e){var t=e.target.value;this.setState((function(e){return e.file=t}))}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsxs)("select",{onChange:this.handleClick.bind(this),children:[Object(b.jsx)("option",{value:"MuzioClementi_SonatinaOpus36No1_Part2.xml",children:"Muzio Clementi: Sonatina Opus 36 No1 Part2"}),Object(b.jsx)("option",{value:"Beethoven_AnDieFerneGeliebte.xml",children:"Beethoven: An Die FerneGeliebte"}),Object(b.jsx)("option",{value:"Chant.xml",children:"Chant"})]}),Object(b.jsx)(H,{file:this.state.file})]})}}]),n}(o.Component);var Q=function(){return Object(b.jsx)("div",{children:Object(b.jsxs)(a.a,{children:[Object(b.jsx)(y,{}),Object(b.jsxs)(s.c,{children:[Object(b.jsx)(s.a,{path:"/",exact:!0,component:G}),Object(b.jsx)(s.a,{path:"/About",component:P}),Object(b.jsx)(s.a,{path:"/Notes_songs",component:K})]})]})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,128)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),o(e),r(e),c(e),i(e)}))};i.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(Q,{})}),document.getElementById("root")),Y()},79:function(e,t,n){},80:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.d7a51497.chunk.js.map